(()=>{"use strict";var t={134:function(t,e,i){var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(o,r){function n(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,h)}a((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Chroma=void 0;const o=i(371);e.Chroma=class{constructor(){this.keyboard=new o.Matrix(22,6)}init(t){return s(this,void 0,void 0,(function*(){if(this.uri)return!0;try{const e=yield this.request({url:"http://localhost:54235/razer/chromasdk",body:{title:t.title,description:t.description,author:{name:t.authorName,contact:t.authorContact},device_supported:t.supportedDevices,category:t.category}});return this.uri=e.uri,this.sessionId=e.sessionid,this.interval=setInterval((()=>s(this,void 0,void 0,(function*(){yield this.request({method:"PUT",path:"/heartbeat"})}))),1e3),!0}catch(t){return console.error(t),!1}}))}uninitialize(){return s(this,void 0,void 0,(function*(){this.uri&&(yield this.request({method:"DELETE"}),clearInterval(this.interval))}))}drawKeyboard(t,e,i){return s(this,void 0,void 0,(function*(){this.keyboard.clear(),this.keyboard.copy(t,e,i),yield this.request({path:"/keyboard",method:"PUT",body:{effect:"CHROMA_CUSTOM",param:this.keyboard.data}})}))}request(t){return s(this,void 0,void 0,(function*(){if(!t.url&&!this.uri)return;const e={method:t.method||"POST"};t.body&&(e.headers={"content-type":"application/json"},e.body=JSON.stringify(t.body));let i=t.url||this.uri;t.path&&(i+=t.path);const s=yield fetch(i,e);return yield s.json()}))}}},607:function(t,e,i){var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(o,r){function n(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,h)}a((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=i(134),r=i(970);s(void 0,void 0,void 0,(function*(){JSON.stringify({title:"Razer Snake",description:"Snake Game for Razer Chroma Keyboards",author:{name:"Diego Iáñez Ávila",contact:"https://github.com/diegodan1893"},device_supported:["keyboard"],category:"game"});const t=new o.Chroma;(yield t.init({title:"Razer Snake",description:"Snake Game for Razer Chroma Keyboards",authorName:"Diego Iáñez Ávila",authorContact:"https://github.com/diegodan1893",supportedDevices:["keyboard"],category:"game"}))&&new r.SnakeBoard(t,11,4,2,1).startGame()}))},371:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0,e.Matrix=class{constructor(t,e,i=0){this.width=t,this.height=e,this.fillValue=i,this._data=new Array(e).fill(0).map((()=>new Array(t).fill(i)))}get data(){return this._data}clear(){for(let t=0;t<this.height;++t)for(let e=0;e<this.width;++e)this._data[t][e]=this.fillValue}set(t,e,i){this._data[e][t]=i}copy(t,e=0,i=0){t._data.forEach(((t,s)=>t.forEach(((t,o)=>this._data[s+i][o+e]=t))))}}},726:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.randomInRange=void 0,e.randomInRange=(t,e)=>Math.random()*(e-t)+t},492:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Food=void 0;const s=i(726),o=i(425);e.Food=class{constructor(t){this.board=t,this.position={x:0,y:0},this.regenerate()}update(){}draw(t){t.set(this.position.x,this.position.y,16777215)}testCollision(t){return this.position.x==t.x&&this.position.y==t.y}handleCollision(t){t instanceof o.Snake&&(t.grow(1),this.regenerate())}regenerate(){let t;do{t={x:Math.floor((0,s.randomInRange)(0,this.board.width)),y:Math.floor((0,s.randomInRange)(0,this.board.height))}}while(this.board.query(t));this.position=t}}},425:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.Snake=void 0,function(t){t[t.None=0]="None",t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=3]="Left",t[t.Right=4]="Right"}(i||(i={}));class s{constructor(t){this.maxLength=t,this.buffer=new Array(t),this.start=0,this.end=0,this.length=0}enqueue(t){this.buffer[this.end-1]!==t&&this.length!==this.maxLength&&(++this.length,this.buffer[this.end]=t,this.end=(this.end+1)%this.maxLength)}dequeue(){if(0===this.length)return;--this.length;const t=this.buffer[this.start];return this.start=(this.start+1)%this.maxLength,t}}class o{constructor(t,e,o,r){this.board=t,this.snake=e,this.position=o,this.prev=r,this.direction=i.None,r||(this.inputBuffer=new s(3)),this.alive=!0}update(){if(this.processInput(),this.next&&this.next.update(),this.snake.alive){const t=this.direction;if(this.prev&&(this.direction=this.prev.direction),t===i.None)return;const e=this.getNextPosition(t);if(!this.prev){const t=this.board.query(e);t&&t.handleCollision(this.snake)}this.position=e}else this.alive&&(this.prev?this.alive=this.prev.alive:this.alive=!1)}draw(t){t.set(this.position.x,this.position.y,this.alive?65280:255),this.next&&this.next.draw(t)}testCollision(t){return t.x===this.position.x&&t.y===this.position.y||!!this.next&&this.next.testCollision(t)}handleCollision(t){this.snake.kill(),this.board.loseGame()}handleInput(t){if(!this.inputBuffer)return;let e=this.direction;switch(t){case"ArrowUp":e=i.Up;break;case"ArrowDown":e=i.Down;break;case"ArrowRight":e=i.Right;break;case"ArrowLeft":e=i.Left}this.inputBuffer.enqueue(e)}grow(t){t<=0||(this.next?this.next.grow(t):(this.next=new o(this.board,this.snake,this.position,this),this.next.grow(t-1)))}getNextPosition(t){const e={x:this.position.x,y:this.position.y};switch(t){case i.None:break;case i.Up:e.y=(e.y+this.board.height-1)%this.board.height;break;case i.Down:e.y=(e.y+1)%this.board.height;break;case i.Left:e.x=(e.x+this.board.width-1)%this.board.width;break;case i.Right:e.x=(e.x+1)%this.board.width}return e}processInput(){if(!this.inputBuffer)return;let t=this.inputBuffer.dequeue(),e=!1;for(;t&&!e;){const i=this.getNextPosition(t);this.next&&this.next.position.x===i.x&&this.next.position.y===i.y?t=this.inputBuffer.dequeue():(this.direction=t,e=!0)}}}e.Snake=class{constructor(t,e,i){this.board=t,this.head=new o(t,this,e,void 0),this.grow(i-1),this._alive=!0}get alive(){return this._alive}update(){this.head.update()}draw(t){this.head.draw(t)}testCollision(t){return this.head.testCollision(t)}handleCollision(t){this.head.handleCollision(t)}handleInput(t){this.head.handleInput(t)}grow(t=1){this.head.grow(t)}kill(){this._alive=!1}}},970:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SnakeBoard=void 0;const s=i(371),o=i(425),r=i(492);var n;!function(t){t[t.Stopped=0]="Stopped",t[t.Playing=1]="Playing",t[t.GameOver=2]="GameOver"}(n||(n={})),e.SnakeBoard=class{constructor(t,e,i,o,r){this.chroma=t,this._width=e,this._height=i,this.offsetX=o,this.offsetY=r,this.entities=[],this.state=n.Stopped,this.screen=new s.Matrix(this.width,this.height)}get width(){return this._width}get height(){return this._height}update(){this.entities.forEach((t=>t.update()))}draw(){this.screen.clear(),this.entities.forEach((t=>t.draw(this.screen))),this.chroma.drawKeyboard(this.screen,this.offsetX,this.offsetY)}query(t){return this.entities.find((e=>e.testCollision(t)))}startGame(){this.state!==n.Stopped&&this.stopGame(),this.entities=[new o.Snake(this,{x:1,y:Math.floor(this.height/2)},3),new r.Food(this)],this.state=n.Playing,this.inputAbortController=new AbortController,document.addEventListener("keydown",(t=>{"Backspace"===t.key?this.startGame():this.entities.forEach((e=>{e.handleInput&&e.handleInput(t.key)}))}),{signal:this.inputAbortController.signal}),this.interval=setInterval((()=>{this.update(),this.draw()}),200)}stopGame(){this.state=n.Stopped,this.inputAbortController&&this.inputAbortController.abort(),this.interval&&(clearInterval(this.interval),this.interval=void 0)}loseGame(){this.state=n.GameOver}}}},e={};!function i(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsR0FHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQnRCLElBQWpCdUIsRUFDSCxPQUFPQSxFQUFhQyxRQUdyQixJQUFJQyxFQUFTTCxFQUF5QkUsR0FBWSxDQUdqREUsUUFBUyxDQUFDLEdBT1gsT0FIQUUsRUFBb0JKLEdBQVVLLEtBQUtGLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNILEdBR3BFSSxFQUFPRCxPQUNmLENDbkIwQkgsQ0FBb0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhemVyLXNuYWtlLy4vc3JjL2Nocm9tYS9DaHJvbWEudHMiLCJ3ZWJwYWNrOi8vcmF6ZXItc25ha2UvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcmF6ZXItc25ha2UvLi9zcmMvbWF0aC9NYXRyaXgudHMiLCJ3ZWJwYWNrOi8vcmF6ZXItc25ha2UvLi9zcmMvbWF0aC9SYW5kb20udHMiLCJ3ZWJwYWNrOi8vcmF6ZXItc25ha2UvLi9zcmMvc25ha2UvRm9vZC50cyIsIndlYnBhY2s6Ly9yYXplci1zbmFrZS8uL3NyYy9zbmFrZS9TbmFrZS50cyIsIndlYnBhY2s6Ly9yYXplci1zbmFrZS8uL3NyYy9zbmFrZS9TbmFrZUJvYXJkLnRzIiwid2VicGFjazovL3JhemVyLXNuYWtlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3JhemVyLXNuYWtlL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXRyaXggfSBmcm9tIFwiLi4vbWF0aC9NYXRyaXhcIlxyXG5cclxuY29uc3QgUkFaRVJfQ0hST01BX1VSSSA9IFwiaHR0cDovL2xvY2FsaG9zdDo1NDIzNS9yYXplci9jaHJvbWFzZGtcIlxyXG5cclxuaW50ZXJmYWNlIENocm9tYUluaXRPcHRpb25zIHtcclxuXHR0aXRsZTogc3RyaW5nXHJcblx0ZGVzY3JpcHRpb246IHN0cmluZ1xyXG5cdGF1dGhvck5hbWU6IHN0cmluZ1xyXG5cdGF1dGhvckNvbnRhY3Q6IHN0cmluZ1xyXG5cdHN1cHBvcnRlZERldmljZXM6IHN0cmluZ1tdXHJcblx0Y2F0ZWdvcnk6IHN0cmluZ1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUmVxdWVzdE9wdGlvbnMge1xyXG5cdHVybD86IHN0cmluZ1xyXG5cdHBhdGg/OiBzdHJpbmdcclxuXHRtZXRob2Q/OiBcIkdFVFwiIHwgXCJQT1NUXCIgfCBcIlBVVFwiIHwgXCJERUxFVEVcIlxyXG5cdGJvZHk/OiBvYmplY3RcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENocm9tYSB7XHJcblx0cHJpdmF0ZSB1cmk/OiBzdHJpbmdcclxuXHRwcml2YXRlIHNlc3Npb25JZD86IG51bWJlclxyXG5cdHByaXZhdGUgaW50ZXJ2YWw/OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PlxyXG5cclxuXHRwcml2YXRlIGtleWJvYXJkOiBNYXRyaXhcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLmtleWJvYXJkID0gbmV3IE1hdHJpeCgyMiwgNilcclxuXHR9XHJcblxyXG5cdGFzeW5jIGluaXQoaW5pdE9wdGlvbnM6IENocm9tYUluaXRPcHRpb25zKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRpZiAodGhpcy51cmkpIHtcclxuXHRcdFx0Ly8gQWxyZWFkeSBpbml0aWFsaXplZFxyXG5cdFx0XHRyZXR1cm4gdHJ1ZVxyXG5cdFx0fVxyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0KHtcclxuXHRcdFx0XHR1cmw6IFJBWkVSX0NIUk9NQV9VUkksXHJcblx0XHRcdFx0Ym9keToge1xyXG5cdFx0XHRcdFx0dGl0bGU6IGluaXRPcHRpb25zLnRpdGxlLFxyXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGluaXRPcHRpb25zLmRlc2NyaXB0aW9uLFxyXG5cdFx0XHRcdFx0YXV0aG9yOiB7XHJcblx0XHRcdFx0XHRcdG5hbWU6IGluaXRPcHRpb25zLmF1dGhvck5hbWUsXHJcblx0XHRcdFx0XHRcdGNvbnRhY3Q6IGluaXRPcHRpb25zLmF1dGhvckNvbnRhY3QsXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZGV2aWNlX3N1cHBvcnRlZDogaW5pdE9wdGlvbnMuc3VwcG9ydGVkRGV2aWNlcyxcclxuXHRcdFx0XHRcdGNhdGVnb3J5OiBpbml0T3B0aW9ucy5jYXRlZ29yeSxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHR9KVxyXG5cclxuXHRcdFx0dGhpcy51cmkgPSByZXNwb25zZS51cmlcclxuXHRcdFx0dGhpcy5zZXNzaW9uSWQgPSByZXNwb25zZS5zZXNzaW9uaWRcclxuXHJcblx0XHRcdHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KHtcclxuXHRcdFx0XHRcdG1ldGhvZDogXCJQVVRcIixcclxuXHRcdFx0XHRcdHBhdGg6IFwiL2hlYXJ0YmVhdFwiLFxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0sIDEwMDApXHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcilcclxuXHRcdFx0cmV0dXJuIGZhbHNlXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyB1bmluaXRpYWxpemUoKSB7XHJcblx0XHRpZiAoIXRoaXMudXJpKSB7XHJcblx0XHRcdHJldHVyblxyXG5cdFx0fVxyXG5cclxuXHRcdGF3YWl0IHRoaXMucmVxdWVzdCh7IG1ldGhvZDogXCJERUxFVEVcIiB9KVxyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsISlcclxuXHR9XHJcblxyXG5cdGFzeW5jIGRyYXdLZXlib2FyZChpbWFnZTogTWF0cml4LCBvZmZzZXRYOiBudW1iZXIsIG9mZnNldFk6IG51bWJlcikge1xyXG5cdFx0dGhpcy5rZXlib2FyZC5jbGVhcigpXHJcblxyXG5cdFx0dGhpcy5rZXlib2FyZC5jb3B5KGltYWdlLCBvZmZzZXRYLCBvZmZzZXRZKVxyXG5cclxuXHRcdGF3YWl0IHRoaXMucmVxdWVzdCh7XHJcblx0XHRcdHBhdGg6IFwiL2tleWJvYXJkXCIsXHJcblx0XHRcdG1ldGhvZDogXCJQVVRcIixcclxuXHRcdFx0Ym9keToge1xyXG5cdFx0XHRcdGVmZmVjdDogXCJDSFJPTUFfQ1VTVE9NXCIsXHJcblx0XHRcdFx0cGFyYW06IHRoaXMua2V5Ym9hcmQuZGF0YSxcclxuXHRcdFx0fSxcclxuXHRcdH0pXHJcblx0fVxyXG5cclxuXHRhc3luYyByZXF1ZXN0KG9wdGlvbnM6IFJlcXVlc3RPcHRpb25zKSB7XHJcblx0XHRpZiAoIW9wdGlvbnMudXJsICYmICF0aGlzLnVyaSkge1xyXG5cdFx0XHRyZXR1cm5cclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCByZXF1ZXN0SW5pdDogUmVxdWVzdEluaXQgPSB7XHJcblx0XHRcdG1ldGhvZDogb3B0aW9ucy5tZXRob2QgfHwgXCJQT1NUXCIsXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKG9wdGlvbnMuYm9keSkge1xyXG5cdFx0XHRyZXF1ZXN0SW5pdC5oZWFkZXJzID0ge1xyXG5cdFx0XHRcdFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXF1ZXN0SW5pdC5ib2R5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5ib2R5KVxyXG5cdFx0fVxyXG5cclxuXHRcdGxldCB1cmwgPSBvcHRpb25zLnVybCB8fCB0aGlzLnVyaSFcclxuXHRcdGlmIChvcHRpb25zLnBhdGgpIHtcclxuXHRcdFx0dXJsICs9IG9wdGlvbnMucGF0aFxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCByZXF1ZXN0SW5pdClcclxuXHRcdHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKClcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ2hyb21hIH0gZnJvbSBcIi4vY2hyb21hL0Nocm9tYVwiXHJcbmltcG9ydCB7IFNuYWtlQm9hcmQgfSBmcm9tIFwiLi9zbmFrZS9TbmFrZUJvYXJkXCJcclxuXHJcbmNvbnN0IG1haW4gPSBhc3luYyAoKSA9PiB7XHJcblx0Y29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdHRpdGxlOiBcIlJhemVyIFNuYWtlXCIsXHJcblx0XHRkZXNjcmlwdGlvbjogXCJTbmFrZSBHYW1lIGZvciBSYXplciBDaHJvbWEgS2V5Ym9hcmRzXCIsXHJcblx0XHRhdXRob3I6IHtcclxuXHRcdFx0bmFtZTogXCJEaWVnbyBJw6HDsWV6IMOBdmlsYVwiLFxyXG5cdFx0XHRjb250YWN0OiBcImh0dHBzOi8vZ2l0aHViLmNvbS9kaWVnb2RhbjE4OTNcIixcclxuXHRcdH0sXHJcblx0XHRkZXZpY2Vfc3VwcG9ydGVkOiBbXCJrZXlib2FyZFwiXSxcclxuXHRcdGNhdGVnb3J5OiBcImdhbWVcIixcclxuXHR9KVxyXG5cclxuXHRjb25zdCBjaHJvbWEgPSBuZXcgQ2hyb21hKClcclxuXHRjb25zdCBzdWNjZXNzID0gYXdhaXQgY2hyb21hLmluaXQoe1xyXG5cdFx0dGl0bGU6IFwiUmF6ZXIgU25ha2VcIixcclxuXHRcdGRlc2NyaXB0aW9uOiBcIlNuYWtlIEdhbWUgZm9yIFJhemVyIENocm9tYSBLZXlib2FyZHNcIixcclxuXHRcdGF1dGhvck5hbWU6IFwiRGllZ28gScOhw7FleiDDgXZpbGFcIixcclxuXHRcdGF1dGhvckNvbnRhY3Q6IFwiaHR0cHM6Ly9naXRodWIuY29tL2RpZWdvZGFuMTg5M1wiLFxyXG5cdFx0c3VwcG9ydGVkRGV2aWNlczogW1wia2V5Ym9hcmRcIl0sXHJcblx0XHRjYXRlZ29yeTogXCJnYW1lXCIsXHJcblx0fSlcclxuXHJcblx0aWYgKHN1Y2Nlc3MpIHtcclxuXHRcdGNvbnN0IHNuYWtlQm9hcmQgPSBuZXcgU25ha2VCb2FyZChjaHJvbWEsIDExLCA0LCAyLCAxKVxyXG5cdFx0c25ha2VCb2FyZC5zdGFydEdhbWUoKVxyXG5cdH1cclxufVxyXG5cclxubWFpbigpXHJcbiIsImV4cG9ydCBjbGFzcyBNYXRyaXgge1xyXG5cdHByaXZhdGUgX2RhdGE6IG51bWJlcltdW11cclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIHdpZHRoOiBudW1iZXIsXHJcblx0XHRwcml2YXRlIGhlaWdodDogbnVtYmVyLFxyXG5cdFx0cHJpdmF0ZSBmaWxsVmFsdWU6IG51bWJlciA9IDBcclxuXHQpIHtcclxuXHRcdHRoaXMuX2RhdGEgPSBuZXcgQXJyYXkoaGVpZ2h0KVxyXG5cdFx0XHQuZmlsbCgwKVxyXG5cdFx0XHQubWFwKCgpID0+IG5ldyBBcnJheSh3aWR0aCkuZmlsbChmaWxsVmFsdWUpKVxyXG5cdH1cclxuXHJcblx0Z2V0IGRhdGEoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fZGF0YVxyXG5cdH1cclxuXHJcblx0Y2xlYXIoKSB7XHJcblx0XHRmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyArK3kpIHtcclxuXHRcdFx0Zm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyArK3gpIHtcclxuXHRcdFx0XHR0aGlzLl9kYXRhW3ldW3hdID0gdGhpcy5maWxsVmFsdWVcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2V0KHg6IG51bWJlciwgeTogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSB7XHJcblx0XHR0aGlzLl9kYXRhW3ldW3hdID0gdmFsdWVcclxuXHR9XHJcblxyXG5cdGNvcHkobWF0cml4OiBNYXRyaXgsIG9mZnNldFg6IG51bWJlciA9IDAsIG9mZnNldFk6IG51bWJlciA9IDApIHtcclxuXHRcdG1hdHJpeC5fZGF0YS5mb3JFYWNoKChyb3csIHkpID0+XHJcblx0XHRcdHJvdy5mb3JFYWNoKFxyXG5cdFx0XHRcdCh2YWx1ZSwgeCkgPT4gKHRoaXMuX2RhdGFbeSArIG9mZnNldFldW3ggKyBvZmZzZXRYXSA9IHZhbHVlKVxyXG5cdFx0XHQpXHJcblx0XHQpXHJcblx0fVxyXG59XHJcbiIsIi8qKlxyXG4gKiBSZXR1cm5zIGEgcmFuZG9tIG51bWJlciBpbiB0aGUgcmFuZ2UgW3N0YXJ0LCBlbmQpXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmFuZG9tSW5SYW5nZSA9IChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IG51bWJlciA9PiB7XHJcblx0cmV0dXJuIE1hdGgucmFuZG9tKCkgKiAoZW5kIC0gc3RhcnQpICsgc3RhcnRcclxufVxyXG4iLCJpbXBvcnQgeyBNYXRyaXggfSBmcm9tIFwiLi4vbWF0aC9NYXRyaXhcIlxyXG5pbXBvcnQgeyByYW5kb21JblJhbmdlIH0gZnJvbSBcIi4uL21hdGgvUmFuZG9tXCJcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi9tYXRoL1ZlY3RvcjJcIlxyXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tIFwiLi9FbnRpdHlcIlxyXG5pbXBvcnQgeyBTbmFrZSB9IGZyb20gXCIuL1NuYWtlXCJcclxuaW1wb3J0IHsgU25ha2VCb2FyZCB9IGZyb20gXCIuL1NuYWtlQm9hcmRcIlxyXG5cclxuY29uc3QgRk9PRF9DT0xPUiA9IDB4ZmZmZmZmXHJcblxyXG5leHBvcnQgY2xhc3MgRm9vZCBpbXBsZW1lbnRzIEVudGl0eSB7XHJcblx0cHJpdmF0ZSBwb3NpdGlvbjogVmVjdG9yMlxyXG5cclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIGJvYXJkOiBTbmFrZUJvYXJkKSB7XHJcblx0XHR0aGlzLnBvc2l0aW9uID0geyB4OiAwLCB5OiAwIH1cclxuXHRcdHRoaXMucmVnZW5lcmF0ZSgpXHJcblx0fVxyXG5cclxuXHR1cGRhdGUoKSB7fVxyXG5cclxuXHRkcmF3KHNjcmVlbjogTWF0cml4KSB7XHJcblx0XHRzY3JlZW4uc2V0KHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCBGT09EX0NPTE9SKVxyXG5cdH1cclxuXHJcblx0dGVzdENvbGxpc2lvbihwb3NpdGlvbjogVmVjdG9yMikge1xyXG5cdFx0cmV0dXJuIHRoaXMucG9zaXRpb24ueCA9PSBwb3NpdGlvbi54ICYmIHRoaXMucG9zaXRpb24ueSA9PSBwb3NpdGlvbi55XHJcblx0fVxyXG5cclxuXHRoYW5kbGVDb2xsaXNpb24oZW50aXR5OiBFbnRpdHkpIHtcclxuXHRcdGlmIChlbnRpdHkgaW5zdGFuY2VvZiBTbmFrZSkge1xyXG5cdFx0XHRlbnRpdHkuZ3JvdygxKVxyXG5cdFx0XHR0aGlzLnJlZ2VuZXJhdGUoKVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZWdlbmVyYXRlKCkge1xyXG5cdFx0bGV0IG5ld1Bvc2l0aW9uOiBWZWN0b3IyXHJcblxyXG5cdFx0ZG8ge1xyXG5cdFx0XHRuZXdQb3NpdGlvbiA9IHtcclxuXHRcdFx0XHR4OiBNYXRoLmZsb29yKHJhbmRvbUluUmFuZ2UoMCwgdGhpcy5ib2FyZC53aWR0aCkpLFxyXG5cdFx0XHRcdHk6IE1hdGguZmxvb3IocmFuZG9tSW5SYW5nZSgwLCB0aGlzLmJvYXJkLmhlaWdodCkpLFxyXG5cdFx0XHR9XHJcblx0XHR9IHdoaWxlICh0aGlzLmJvYXJkLnF1ZXJ5KG5ld1Bvc2l0aW9uKSlcclxuXHJcblx0XHR0aGlzLnBvc2l0aW9uID0gbmV3UG9zaXRpb25cclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgTWF0cml4IH0gZnJvbSBcIi4uL21hdGgvTWF0cml4XCJcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi9tYXRoL1ZlY3RvcjJcIlxyXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tIFwiLi9FbnRpdHlcIlxyXG5pbXBvcnQgeyBTbmFrZUJvYXJkIH0gZnJvbSBcIi4vU25ha2VCb2FyZFwiXHJcblxyXG5jb25zdCBBTElWRV9TTkFLRV9DT0xPUiA9IDB4MDBmZjAwXHJcbmNvbnN0IERFQURfU05BS0VfQ09MT1IgPSAweDAwMDBmZlxyXG5cclxuZW51bSBEaXJlY3Rpb24ge1xyXG5cdE5vbmUsXHJcblx0VXAsXHJcblx0RG93bixcclxuXHRMZWZ0LFxyXG5cdFJpZ2h0LFxyXG59XHJcblxyXG5jbGFzcyBJbnB1dEJ1ZmZlciB7XHJcblx0cHJpdmF0ZSBidWZmZXI6IERpcmVjdGlvbltdXHJcblx0cHJpdmF0ZSBzdGFydDogbnVtYmVyXHJcblx0cHJpdmF0ZSBlbmQ6IG51bWJlclxyXG5cdHByaXZhdGUgbGVuZ3RoOiBudW1iZXJcclxuXHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBtYXhMZW5ndGg6IG51bWJlcikge1xyXG5cdFx0dGhpcy5idWZmZXIgPSBuZXcgQXJyYXkobWF4TGVuZ3RoKVxyXG5cdFx0dGhpcy5zdGFydCA9IDBcclxuXHRcdHRoaXMuZW5kID0gMFxyXG5cdFx0dGhpcy5sZW5ndGggPSAwXHJcblx0fVxyXG5cclxuXHRlbnF1ZXVlKGlucHV0OiBEaXJlY3Rpb24pIHtcclxuXHRcdGlmICh0aGlzLmJ1ZmZlclt0aGlzLmVuZCAtIDFdID09PSBpbnB1dCkge1xyXG5cdFx0XHQvLyBJbnB1dCBpcyB0aGUgc2FtZSBhcyB0aGUgbGFzdCBvbmUsIGRpc2NhcmRcclxuXHRcdFx0cmV0dXJuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMubGVuZ3RoID09PSB0aGlzLm1heExlbmd0aCkge1xyXG5cdFx0XHQvLyBRdWV1ZSBpcyBmdWxsLCBkaXNjYXJkIGlucHV0XHJcblx0XHRcdHJldHVyblxyXG5cdFx0fVxyXG5cclxuXHRcdCsrdGhpcy5sZW5ndGhcclxuXHRcdHRoaXMuYnVmZmVyW3RoaXMuZW5kXSA9IGlucHV0XHJcblx0XHR0aGlzLmVuZCA9ICh0aGlzLmVuZCArIDEpICUgdGhpcy5tYXhMZW5ndGhcclxuXHR9XHJcblxyXG5cdGRlcXVldWUoKTogRGlyZWN0aW9uIHwgdW5kZWZpbmVkIHtcclxuXHRcdGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkXHJcblx0XHR9XHJcblxyXG5cdFx0LS10aGlzLmxlbmd0aFxyXG5cdFx0Y29uc3QgaW5wdXQgPSB0aGlzLmJ1ZmZlclt0aGlzLnN0YXJ0XVxyXG5cdFx0dGhpcy5zdGFydCA9ICh0aGlzLnN0YXJ0ICsgMSkgJSB0aGlzLm1heExlbmd0aFxyXG5cclxuXHRcdHJldHVybiBpbnB1dFxyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgU25ha2VCbG9jayBpbXBsZW1lbnRzIEVudGl0eSB7XHJcblx0cHJpdmF0ZSBuZXh0PzogU25ha2VCbG9ja1xyXG5cdHByaXZhdGUgZGlyZWN0aW9uOiBEaXJlY3Rpb24gPSBEaXJlY3Rpb24uTm9uZVxyXG5cdHByaXZhdGUgaW5wdXRCdWZmZXI/OiBJbnB1dEJ1ZmZlclxyXG5cdHByaXZhdGUgYWxpdmU6IGJvb2xlYW5cclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIGJvYXJkOiBTbmFrZUJvYXJkLFxyXG5cdFx0cHJpdmF0ZSBzbmFrZTogU25ha2UsXHJcblx0XHRwcml2YXRlIHBvc2l0aW9uOiBWZWN0b3IyLFxyXG5cdFx0cHJpdmF0ZSBwcmV2PzogU25ha2VCbG9ja1xyXG5cdCkge1xyXG5cdFx0aWYgKCFwcmV2KSB7XHJcblx0XHRcdC8vIFRoaXMgaXMgdGhlIGhlYWQsIGhhbmRsZSBpbnB1dFxyXG5cdFx0XHR0aGlzLmlucHV0QnVmZmVyID0gbmV3IElucHV0QnVmZmVyKDMpXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hbGl2ZSA9IHRydWVcclxuXHR9XHJcblxyXG5cdHVwZGF0ZSgpIHtcclxuXHRcdHRoaXMucHJvY2Vzc0lucHV0KClcclxuXHJcblx0XHRpZiAodGhpcy5uZXh0KSB7XHJcblx0XHRcdHRoaXMubmV4dC51cGRhdGUoKVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnNuYWtlLmFsaXZlKSB7XHJcblx0XHRcdGNvbnN0IGN1cnJlbnREaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvblxyXG5cclxuXHRcdFx0aWYgKHRoaXMucHJldikge1xyXG5cdFx0XHRcdHRoaXMuZGlyZWN0aW9uID0gdGhpcy5wcmV2LmRpcmVjdGlvblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoY3VycmVudERpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLk5vbmUpIHtcclxuXHRcdFx0XHQvLyBJZiB0aGUgc25ha2UgaXMgbm90IG1vdmluZywgZG9uJ3QgdGVzdCBmb3IgY29sbGlzaW9uc1xyXG5cdFx0XHRcdHJldHVyblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBuZXdQb3NpdGlvbiA9IHRoaXMuZ2V0TmV4dFBvc2l0aW9uKGN1cnJlbnREaXJlY3Rpb24pXHJcblxyXG5cdFx0XHRpZiAoIXRoaXMucHJldikge1xyXG5cdFx0XHRcdC8vIFRoaXMgaXMgdGhlIGhlYWQsIGNoZWNrIGZvciBjb2xsaXNpb25zXHJcblx0XHRcdFx0Y29uc3QgY29sbGlzaW9uID0gdGhpcy5ib2FyZC5xdWVyeShuZXdQb3NpdGlvbilcclxuXHJcblx0XHRcdFx0aWYgKGNvbGxpc2lvbikge1xyXG5cdFx0XHRcdFx0Y29sbGlzaW9uLmhhbmRsZUNvbGxpc2lvbih0aGlzLnNuYWtlKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5wb3NpdGlvbiA9IG5ld1Bvc2l0aW9uXHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuYWxpdmUpIHtcclxuXHRcdFx0Ly8gRGVhZCBhbmltYXRpb25cclxuXHRcdFx0aWYgKHRoaXMucHJldikge1xyXG5cdFx0XHRcdHRoaXMuYWxpdmUgPSB0aGlzLnByZXYuYWxpdmVcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBUaGlzIGlzIHRoZSBoZWFkXHJcblx0XHRcdFx0dGhpcy5hbGl2ZSA9IGZhbHNlXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGRyYXcoc2NyZWVuOiBNYXRyaXgpIHtcclxuXHRcdHNjcmVlbi5zZXQoXHJcblx0XHRcdHRoaXMucG9zaXRpb24ueCxcclxuXHRcdFx0dGhpcy5wb3NpdGlvbi55LFxyXG5cdFx0XHR0aGlzLmFsaXZlID8gQUxJVkVfU05BS0VfQ09MT1IgOiBERUFEX1NOQUtFX0NPTE9SXHJcblx0XHQpXHJcblxyXG5cdFx0aWYgKHRoaXMubmV4dCkge1xyXG5cdFx0XHR0aGlzLm5leHQuZHJhdyhzY3JlZW4pXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR0ZXN0Q29sbGlzaW9uKHBvc2l0aW9uOiBWZWN0b3IyKTogYm9vbGVhbiB7XHJcblx0XHRpZiAocG9zaXRpb24ueCA9PT0gdGhpcy5wb3NpdGlvbi54ICYmIHBvc2l0aW9uLnkgPT09IHRoaXMucG9zaXRpb24ueSkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLm5leHQpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMubmV4dC50ZXN0Q29sbGlzaW9uKHBvc2l0aW9uKVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZVxyXG5cdH1cclxuXHJcblx0aGFuZGxlQ29sbGlzaW9uKGVudGl0eTogRW50aXR5KSB7XHJcblx0XHR0aGlzLnNuYWtlLmtpbGwoKVxyXG5cdFx0dGhpcy5ib2FyZC5sb3NlR2FtZSgpXHJcblx0fVxyXG5cclxuXHRoYW5kbGVJbnB1dChrZXk6IHN0cmluZykge1xyXG5cdFx0aWYgKCF0aGlzLmlucHV0QnVmZmVyKSB7XHJcblx0XHRcdHJldHVyblxyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBuZXdEaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvblxyXG5cclxuXHRcdHN3aXRjaCAoa2V5KSB7XHJcblx0XHRcdGNhc2UgXCJBcnJvd1VwXCI6XHJcblx0XHRcdFx0bmV3RGlyZWN0aW9uID0gRGlyZWN0aW9uLlVwXHJcblx0XHRcdFx0YnJlYWtcclxuXHRcdFx0Y2FzZSBcIkFycm93RG93blwiOlxyXG5cdFx0XHRcdG5ld0RpcmVjdGlvbiA9IERpcmVjdGlvbi5Eb3duXHJcblx0XHRcdFx0YnJlYWtcclxuXHRcdFx0Y2FzZSBcIkFycm93UmlnaHRcIjpcclxuXHRcdFx0XHRuZXdEaXJlY3Rpb24gPSBEaXJlY3Rpb24uUmlnaHRcclxuXHRcdFx0XHRicmVha1xyXG5cdFx0XHRjYXNlIFwiQXJyb3dMZWZ0XCI6XHJcblx0XHRcdFx0bmV3RGlyZWN0aW9uID0gRGlyZWN0aW9uLkxlZnRcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRicmVha1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuaW5wdXRCdWZmZXIuZW5xdWV1ZShuZXdEaXJlY3Rpb24pXHJcblx0fVxyXG5cclxuXHRncm93KGxlbmd0aDogbnVtYmVyKSB7XHJcblx0XHRpZiAobGVuZ3RoIDw9IDApIHtcclxuXHRcdFx0cmV0dXJuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMubmV4dCkge1xyXG5cdFx0XHR0aGlzLm5leHQuZ3JvdyhsZW5ndGgpXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLm5leHQgPSBuZXcgU25ha2VCbG9jayhcclxuXHRcdFx0XHR0aGlzLmJvYXJkLFxyXG5cdFx0XHRcdHRoaXMuc25ha2UsXHJcblx0XHRcdFx0dGhpcy5wb3NpdGlvbixcclxuXHRcdFx0XHR0aGlzXHJcblx0XHRcdClcclxuXHRcdFx0dGhpcy5uZXh0Lmdyb3cobGVuZ3RoIC0gMSlcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0TmV4dFBvc2l0aW9uKGRpcmVjdGlvbjogRGlyZWN0aW9uKTogVmVjdG9yMiB7XHJcblx0XHRjb25zdCBuZXdQb3NpdGlvbiA9IHsgeDogdGhpcy5wb3NpdGlvbi54LCB5OiB0aGlzLnBvc2l0aW9uLnkgfVxyXG5cclxuXHRcdHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcblx0XHRcdGNhc2UgRGlyZWN0aW9uLk5vbmU6XHJcblx0XHRcdFx0Ly8gRG8gbm90aGluZ1xyXG5cdFx0XHRcdGJyZWFrXHJcblx0XHRcdGNhc2UgRGlyZWN0aW9uLlVwOlxyXG5cdFx0XHRcdC8vIFdpdGggdGhlIG1vZHVsbyBvcGVyYXRpb24sIHRoaXMgaXMgZXF1aXZhbGVudCB0byBzdWJzdHJhY3RpbmcgMVxyXG5cdFx0XHRcdC8vIHRvIHRoZSBjdXJyZW50IHBvc2l0aW9uLCB3aGlsZSBhdm9pZGluZyBuZWdhdGl2ZSBudW1iZXJzXHJcblx0XHRcdFx0bmV3UG9zaXRpb24ueSA9XHJcblx0XHRcdFx0XHQobmV3UG9zaXRpb24ueSArIHRoaXMuYm9hcmQuaGVpZ2h0IC0gMSkgJSB0aGlzLmJvYXJkLmhlaWdodFxyXG5cdFx0XHRcdGJyZWFrXHJcblx0XHRcdGNhc2UgRGlyZWN0aW9uLkRvd246XHJcblx0XHRcdFx0bmV3UG9zaXRpb24ueSA9IChuZXdQb3NpdGlvbi55ICsgMSkgJSB0aGlzLmJvYXJkLmhlaWdodFxyXG5cdFx0XHRcdGJyZWFrXHJcblx0XHRcdGNhc2UgRGlyZWN0aW9uLkxlZnQ6XHJcblx0XHRcdFx0Ly8gV2l0aCB0aGUgbW9kdWxvIG9wZXJhdGlvbiwgdGhpcyBpcyBlcXVpdmFsZW50IHRvIHN1YnN0cmFjdGluZyAxXHJcblx0XHRcdFx0Ly8gdG8gdGhlIGN1cnJlbnQgcG9zaXRpb24sIHdoaWxlIGF2b2lkaW5nIG5lZ2F0aXZlIG51bWJlcnNcclxuXHRcdFx0XHRuZXdQb3NpdGlvbi54ID1cclxuXHRcdFx0XHRcdChuZXdQb3NpdGlvbi54ICsgdGhpcy5ib2FyZC53aWR0aCAtIDEpICUgdGhpcy5ib2FyZC53aWR0aFxyXG5cdFx0XHRcdGJyZWFrXHJcblx0XHRcdGNhc2UgRGlyZWN0aW9uLlJpZ2h0OlxyXG5cdFx0XHRcdG5ld1Bvc2l0aW9uLnggPSAobmV3UG9zaXRpb24ueCArIDEpICUgdGhpcy5ib2FyZC53aWR0aFxyXG5cdFx0XHRcdGJyZWFrXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG5ld1Bvc2l0aW9uXHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHByb2Nlc3NJbnB1dCgpIHtcclxuXHRcdGlmICghdGhpcy5pbnB1dEJ1ZmZlcikge1xyXG5cdFx0XHRyZXR1cm5cclxuXHRcdH1cclxuXHJcblx0XHRsZXQgbmV4dElucHV0ID0gdGhpcy5pbnB1dEJ1ZmZlci5kZXF1ZXVlKClcclxuXHRcdGxldCBhY2NlcHRlZElucHV0ID0gZmFsc2VcclxuXHJcblx0XHR3aGlsZSAobmV4dElucHV0ICYmICFhY2NlcHRlZElucHV0KSB7XHJcblx0XHRcdC8vIERvbid0IGFsbG93IHRoZSBzbmFrZSB0byBjcmFzaCBpbnRvIGl0c2VsZiBieSByZXZlcnNpbmcgaXRzXHJcblx0XHRcdC8vIG1vdmVtZW50XHJcblx0XHRcdGNvbnN0IG5leHRQb3NpdGlvbiA9IHRoaXMuZ2V0TmV4dFBvc2l0aW9uKG5leHRJbnB1dClcclxuXHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHQhdGhpcy5uZXh0IHx8XHJcblx0XHRcdFx0dGhpcy5uZXh0LnBvc2l0aW9uLnggIT09IG5leHRQb3NpdGlvbi54IHx8XHJcblx0XHRcdFx0dGhpcy5uZXh0LnBvc2l0aW9uLnkgIT09IG5leHRQb3NpdGlvbi55XHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHRoaXMuZGlyZWN0aW9uID0gbmV4dElucHV0XHJcblx0XHRcdFx0YWNjZXB0ZWRJbnB1dCA9IHRydWVcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRuZXh0SW5wdXQgPSB0aGlzLmlucHV0QnVmZmVyLmRlcXVldWUoKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU25ha2UgaW1wbGVtZW50cyBFbnRpdHkge1xyXG5cdHByaXZhdGUgaGVhZDogU25ha2VCbG9ja1xyXG5cdHByaXZhdGUgX2FsaXZlOiBib29sZWFuXHJcblxyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgYm9hcmQ6IFNuYWtlQm9hcmQsIHBvc2l0aW9uOiBWZWN0b3IyLCBsZW5ndGg6IG51bWJlcikge1xyXG5cdFx0dGhpcy5oZWFkID0gbmV3IFNuYWtlQmxvY2soYm9hcmQsIHRoaXMsIHBvc2l0aW9uLCB1bmRlZmluZWQpXHJcblx0XHR0aGlzLmdyb3cobGVuZ3RoIC0gMSlcclxuXHJcblx0XHR0aGlzLl9hbGl2ZSA9IHRydWVcclxuXHR9XHJcblxyXG5cdGdldCBhbGl2ZSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9hbGl2ZVxyXG5cdH1cclxuXHJcblx0dXBkYXRlKCkge1xyXG5cdFx0dGhpcy5oZWFkLnVwZGF0ZSgpXHJcblx0fVxyXG5cclxuXHRkcmF3KHNjcmVlbjogTWF0cml4KSB7XHJcblx0XHR0aGlzLmhlYWQuZHJhdyhzY3JlZW4pXHJcblx0fVxyXG5cclxuXHR0ZXN0Q29sbGlzaW9uKHBvc2l0aW9uOiBWZWN0b3IyKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5oZWFkLnRlc3RDb2xsaXNpb24ocG9zaXRpb24pXHJcblx0fVxyXG5cclxuXHRoYW5kbGVDb2xsaXNpb24oZW50aXR5OiBFbnRpdHkpIHtcclxuXHRcdHRoaXMuaGVhZC5oYW5kbGVDb2xsaXNpb24oZW50aXR5KVxyXG5cdH1cclxuXHJcblx0aGFuZGxlSW5wdXQoa2V5OiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuaGVhZC5oYW5kbGVJbnB1dChrZXkpXHJcblx0fVxyXG5cclxuXHRncm93KGxlbmd0aDogbnVtYmVyID0gMSkge1xyXG5cdFx0dGhpcy5oZWFkLmdyb3cobGVuZ3RoKVxyXG5cdH1cclxuXHJcblx0a2lsbCgpIHtcclxuXHRcdHRoaXMuX2FsaXZlID0gZmFsc2VcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgTWF0cml4IH0gZnJvbSBcIi4uL21hdGgvTWF0cml4XCJcclxuaW1wb3J0IHsgQ2hyb21hIH0gZnJvbSBcIi4uL2Nocm9tYS9DaHJvbWFcIlxyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uL21hdGgvVmVjdG9yMlwiXHJcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuL0VudGl0eVwiXHJcbmltcG9ydCB7IFNuYWtlIH0gZnJvbSBcIi4vU25ha2VcIlxyXG5pbXBvcnQgeyBGb29kIH0gZnJvbSBcIi4vRm9vZFwiXHJcblxyXG5lbnVtIEdhbWVTdGF0ZSB7XHJcblx0U3RvcHBlZCxcclxuXHRQbGF5aW5nLFxyXG5cdEdhbWVPdmVyLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU25ha2VCb2FyZCB7XHJcblx0cHJpdmF0ZSBzdGF0ZTogR2FtZVN0YXRlXHJcblx0cHJpdmF0ZSBlbnRpdGllczogRW50aXR5W11cclxuXHRwcml2YXRlIHNjcmVlbjogTWF0cml4XHJcblxyXG5cdHByaXZhdGUgaW50ZXJ2YWw/OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PlxyXG5cdHByaXZhdGUgaW5wdXRBYm9ydENvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXJcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIGNocm9tYTogQ2hyb21hLFxyXG5cdFx0cHJpdmF0ZSBfd2lkdGg6IG51bWJlcixcclxuXHRcdHByaXZhdGUgX2hlaWdodDogbnVtYmVyLFxyXG5cdFx0cHJpdmF0ZSBvZmZzZXRYOiBudW1iZXIsXHJcblx0XHRwcml2YXRlIG9mZnNldFk6IG51bWJlclxyXG5cdCkge1xyXG5cdFx0dGhpcy5lbnRpdGllcyA9IFtdXHJcblx0XHR0aGlzLnN0YXRlID0gR2FtZVN0YXRlLlN0b3BwZWRcclxuXHRcdHRoaXMuc2NyZWVuID0gbmV3IE1hdHJpeCh0aGlzLndpZHRoLCB0aGlzLmhlaWdodClcclxuXHR9XHJcblxyXG5cdGdldCB3aWR0aCgpIHtcclxuXHRcdHJldHVybiB0aGlzLl93aWR0aFxyXG5cdH1cclxuXHJcblx0Z2V0IGhlaWdodCgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9oZWlnaHRcclxuXHR9XHJcblxyXG5cdHVwZGF0ZSgpIHtcclxuXHRcdHRoaXMuZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiBlbnRpdHkudXBkYXRlKCkpXHJcblx0fVxyXG5cclxuXHRkcmF3KCkge1xyXG5cdFx0dGhpcy5zY3JlZW4uY2xlYXIoKVxyXG5cclxuXHRcdHRoaXMuZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiBlbnRpdHkuZHJhdyh0aGlzLnNjcmVlbikpXHJcblxyXG5cdFx0dGhpcy5jaHJvbWEuZHJhd0tleWJvYXJkKHRoaXMuc2NyZWVuLCB0aGlzLm9mZnNldFgsIHRoaXMub2Zmc2V0WSlcclxuXHR9XHJcblxyXG5cdHF1ZXJ5KHBvc2l0aW9uOiBWZWN0b3IyKTogRW50aXR5IHwgdW5kZWZpbmVkIHtcclxuXHRcdHJldHVybiB0aGlzLmVudGl0aWVzLmZpbmQoKGVudGl0eSkgPT4gZW50aXR5LnRlc3RDb2xsaXNpb24ocG9zaXRpb24pKVxyXG5cdH1cclxuXHJcblx0c3RhcnRHYW1lKCkge1xyXG5cdFx0aWYgKHRoaXMuc3RhdGUgIT09IEdhbWVTdGF0ZS5TdG9wcGVkKSB7XHJcblx0XHRcdHRoaXMuc3RvcEdhbWUoKVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZW50aXRpZXMgPSBbXHJcblx0XHRcdG5ldyBTbmFrZSh0aGlzLCB7IHg6IDEsIHk6IE1hdGguZmxvb3IodGhpcy5oZWlnaHQgLyAyKSB9LCAzKSxcclxuXHRcdFx0bmV3IEZvb2QodGhpcyksXHJcblx0XHRdXHJcblxyXG5cdFx0dGhpcy5zdGF0ZSA9IEdhbWVTdGF0ZS5QbGF5aW5nXHJcblxyXG5cdFx0dGhpcy5pbnB1dEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuXHRcdFx0XCJrZXlkb3duXCIsXHJcblx0XHRcdChldmVudCkgPT4ge1xyXG5cdFx0XHRcdGlmIChldmVudC5rZXkgPT09IFwiQmFja3NwYWNlXCIpIHtcclxuXHRcdFx0XHRcdC8vIFJlc3RhcnQgdGhlIGdhbWUgb24gYmFja3NwYWNlXHJcblx0XHRcdFx0XHR0aGlzLnN0YXJ0R2FtZSgpXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChlbnRpdHkuaGFuZGxlSW5wdXQpIHtcclxuXHRcdFx0XHRcdFx0XHRlbnRpdHkuaGFuZGxlSW5wdXQoZXZlbnQua2V5KVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0eyBzaWduYWw6IHRoaXMuaW5wdXRBYm9ydENvbnRyb2xsZXIuc2lnbmFsIH1cclxuXHRcdClcclxuXHJcblx0XHR0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZSgpXHJcblx0XHRcdHRoaXMuZHJhdygpXHJcblx0XHR9LCAyMDApXHJcblx0fVxyXG5cclxuXHRzdG9wR2FtZSgpIHtcclxuXHRcdHRoaXMuc3RhdGUgPSBHYW1lU3RhdGUuU3RvcHBlZFxyXG5cclxuXHRcdGlmICh0aGlzLmlucHV0QWJvcnRDb250cm9sbGVyKSB7XHJcblx0XHRcdHRoaXMuaW5wdXRBYm9ydENvbnRyb2xsZXIuYWJvcnQoKVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLmludGVydmFsKSB7XHJcblx0XHRcdGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbClcclxuXHRcdFx0dGhpcy5pbnRlcnZhbCA9IHVuZGVmaW5lZFxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0bG9zZUdhbWUoKSB7XHJcblx0XHR0aGlzLnN0YXRlID0gR2FtZVN0YXRlLkdhbWVPdmVyXHJcblx0fVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInRoaXMiLCJrZXlib2FyZCIsIk1hdHJpeCIsImluaXQiLCJpbml0T3B0aW9ucyIsInVyaSIsInJlc3BvbnNlIiwicmVxdWVzdCIsInVybCIsImJvZHkiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYXV0aG9yIiwibmFtZSIsImF1dGhvck5hbWUiLCJjb250YWN0IiwiYXV0aG9yQ29udGFjdCIsImRldmljZV9zdXBwb3J0ZWQiLCJzdXBwb3J0ZWREZXZpY2VzIiwiY2F0ZWdvcnkiLCJzZXNzaW9uSWQiLCJzZXNzaW9uaWQiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwibWV0aG9kIiwicGF0aCIsImVycm9yIiwiY29uc29sZSIsInVuaW5pdGlhbGl6ZSIsImNsZWFySW50ZXJ2YWwiLCJkcmF3S2V5Ym9hcmQiLCJpbWFnZSIsIm9mZnNldFgiLCJvZmZzZXRZIiwiY2xlYXIiLCJjb3B5IiwiZWZmZWN0IiwicGFyYW0iLCJkYXRhIiwib3B0aW9ucyIsInJlcXVlc3RJbml0IiwiaGVhZGVycyIsIkpTT04iLCJzdHJpbmdpZnkiLCJmZXRjaCIsImpzb24iLCJjaHJvbWEiLCJDaHJvbWEiLCJTbmFrZUJvYXJkIiwic3RhcnRHYW1lIiwid2lkdGgiLCJoZWlnaHQiLCJmaWxsVmFsdWUiLCJfZGF0YSIsIkFycmF5IiwiZmlsbCIsIm1hcCIsInkiLCJ4Iiwic2V0IiwidmFsdWUiLCJtYXRyaXgiLCJmb3JFYWNoIiwicm93IiwicmFuZG9tSW5SYW5nZSIsInN0YXJ0IiwiZW5kIiwiTWF0aCIsInJhbmRvbSIsImJvYXJkIiwicG9zaXRpb24iLCJyZWdlbmVyYXRlIiwidXBkYXRlIiwiZHJhdyIsInNjcmVlbiIsInRlc3RDb2xsaXNpb24iLCJoYW5kbGVDb2xsaXNpb24iLCJlbnRpdHkiLCJTbmFrZSIsImdyb3ciLCJuZXdQb3NpdGlvbiIsImZsb29yIiwicXVlcnkiLCJEaXJlY3Rpb24iLCJJbnB1dEJ1ZmZlciIsIm1heExlbmd0aCIsImJ1ZmZlciIsImxlbmd0aCIsImVucXVldWUiLCJpbnB1dCIsImRlcXVldWUiLCJTbmFrZUJsb2NrIiwic25ha2UiLCJwcmV2IiwiZGlyZWN0aW9uIiwiTm9uZSIsImlucHV0QnVmZmVyIiwiYWxpdmUiLCJwcm9jZXNzSW5wdXQiLCJuZXh0IiwiY3VycmVudERpcmVjdGlvbiIsImdldE5leHRQb3NpdGlvbiIsImNvbGxpc2lvbiIsImtpbGwiLCJsb3NlR2FtZSIsImhhbmRsZUlucHV0Iiwia2V5IiwibmV3RGlyZWN0aW9uIiwiVXAiLCJEb3duIiwiUmlnaHQiLCJMZWZ0IiwibmV4dElucHV0IiwiYWNjZXB0ZWRJbnB1dCIsIm5leHRQb3NpdGlvbiIsImhlYWQiLCJ1bmRlZmluZWQiLCJfYWxpdmUiLCJHYW1lU3RhdGUiLCJfd2lkdGgiLCJfaGVpZ2h0IiwiZW50aXRpZXMiLCJzdGF0ZSIsIlN0b3BwZWQiLCJmaW5kIiwic3RvcEdhbWUiLCJGb29kIiwiUGxheWluZyIsImlucHV0QWJvcnRDb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJzaWduYWwiLCJhYm9ydCIsIkdhbWVPdmVyIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==